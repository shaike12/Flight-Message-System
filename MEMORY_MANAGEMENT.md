# × ×™×”×•×œ ×–×™×›×¨×•×Ÿ ×‘×©×¨×ª SMS

## ×”×‘×¢×™×”
×”×©×¨×ª SMS ×™×›×•×œ ×œ×”×™×’××¨ ×–×™×›×¨×•×Ÿ (Out of Memory) ×›×©×™×© ×”×¨×‘×” ×‘×§×©×•×ª ××• ×©×”×©×¨×ª ×¢×•×‘×“ ×–××Ÿ ×¨×‘.

## ×”×¤×ª×¨×•× ×•×ª ×©×™×•×©××•

### 1. **×”×’×‘×œ×ª ×–×™×›×¨×•×Ÿ**
```json
// package.json
"start": "node --max-old-space-size=512 server.js"
```
- ××’×‘×™×œ ××ª ×”×©×¨×ª ×œ-512MB ×–×™×›×¨×•×Ÿ
- ××•× ×¢ ×§×¨×™×¡×” ×¢×§×‘ ×–×™×›×¨×•×Ÿ

### 2. **× ×™×§×•×™ ×–×™×›×¨×•×Ÿ ××•×˜×•××˜×™**
```javascript
// ××—×¨×™ ×›×œ ×‘×§×©×”
if (global.gc) {
  global.gc();
}
```
- ×× ×§×” ×–×™×›×¨×•×Ÿ ××—×¨×™ ×›×œ ×©×œ×™×—×ª SMS/Email
- ××•× ×¢ ×”×¦×˜×‘×¨×•×ª ×–×™×›×¨×•×Ÿ

### 3. **Endpoint ×œ× ×™×§×•×™ ×™×“× ×™**
```bash
curl -X POST http://localhost:3001/cleanup
```
- ×× ×§×” ×–×™×›×¨×•×Ÿ ×™×“× ×™×ª
- ××—×–×™×¨ ××™×“×¢ ×¢×œ ×©×™××•×© ×‘×–×™×›×¨×•×Ÿ

### 4. **××¢×§×‘ ×–×™×›×¨×•×Ÿ**
```bash
curl http://localhost:3001/health
```
- ××¦×™×’ ××™×“×¢ ×¢×œ ×©×™××•×© ×‘×–×™×›×¨×•×Ÿ
- ×¢×•×–×¨ ×œ×–×”×•×ª ×‘×¢×™×•×ª

## ××™×š ×œ×”×©×ª××©

### **×‘×“×™×§×” ×©×”×©×¨×ª ×¢×•×‘×“:**
```bash
curl http://localhost:3001/health
```

### **× ×™×§×•×™ ×–×™×›×¨×•×Ÿ ×™×“× ×™:**
```bash
curl -X POST http://localhost:3001/cleanup
```

### **×”×¤×¢×œ×ª ×”×©×¨×ª ×¢× ×”×’×‘×œ×ª ×–×™×›×¨×•×Ÿ:**
```bash
cd sms-server
npm start
```

## ××” ×œ×¢×©×•×ª ×× ×”×©×¨×ª ×¢×“×™×™×Ÿ ×§×•×¨×¡

### 1. **×”×’×“×œ ××ª ×”×’×‘×œ×ª ×”×–×™×›×¨×•×Ÿ:**
```json
// package.json
"start": "node --max-old-space-size=1024 server.js"
```

### 2. **×”×¤×¢×œ × ×™×§×•×™ ×–×™×›×¨×•×Ÿ ×ª×›×•×£ ×™×•×ª×¨:**
```javascript
// ×”×•×¡×£ ×œ×©×¨×ª
setInterval(() => {
  if (global.gc) {
    global.gc();
  }
}, 60000); // ×›×œ ×“×§×”
```

### 3. **×”×’×‘×œ ××ª ××¡×¤×¨ ×”×‘×§×©×•×ª:**
```javascript
// ×”×•×¡×£ rate limiting
const rateLimit = require('express-rate-limit');
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 ×“×§×•×ª
  max: 100 // ××§×¡×™××•× 100 ×‘×§×©×•×ª
});
app.use('/send-sms', limiter);
```

## ×”×’×‘×œ×•×ª Free Plan ×‘-Render

### **×–×™×›×¨×•×Ÿ:**
- **Free Plan**: 512MB RAM
- **Paid Plan**: 2GB+ RAM

### **×”××œ×¦×”:**
- **×”×ª×—×œ ×¢× Free Plan** - 512MB ××¡×¤×™×§ ×œ×¨×•×‘ ×”×©×™××•×©×™×
- **×©×“×¨×’ ×¨×§ ×× ×¦×¨×™×š** - ×× ×™×© ×”×¨×‘×” ××©×ª××©×™×

## ×¡×™×× ×™× ×œ×‘×¢×™×•×ª ×–×™×›×¨×•×Ÿ

### **×‘×§×•× ×¡×•×œ:**
```
FATAL ERROR: Reached heap limit Allocation failed
```

### **×‘××¢×§×‘:**
```bash
curl http://localhost:3001/health
# ×× heapUsed ×’×‘×•×” ×-400MB
```

### **×¤×ª×¨×•× ×•×ª:**
1. ×”×¤×¢×œ × ×™×§×•×™ ×–×™×›×¨×•×Ÿ ×™×“× ×™
2. ×”×¤×¢×œ ××—×“×© ××ª ×”×©×¨×ª
3. ×”×’×“×œ ××ª ×”×’×‘×œ×ª ×”×–×™×›×¨×•×Ÿ
4. ×©×“×¨×’ ×œ-Paid Plan

## ×˜×™×¤×™× ×œ×× ×™×¢×”

### 1. **× ×§×” ×§×‘×¦×™× ×–×× ×™×™×:**
```javascript
// ××—×¨×™ ×¢×™×‘×•×“ CSV
fs.unlinkSync(req.file.path);
```

### 2. **×”×’×‘×œ ×’×•×“×œ ×§×‘×¦×™×:**
```javascript
// multer configuration
const upload = multer({
  limits: {
    fileSize: 5 * 1024 * 1024 // 5MB ××§×¡×™××•×
  }
});
```

### 3. **×”×©×ª××© ×‘-streaming:**
```javascript
// ×‘××§×•× ×œ×˜×¢×•×Ÿ ××ª ×›×œ ×”×§×•×‘×¥ ×œ×–×™×›×¨×•×Ÿ
const stream = fs.createReadStream(filePath);
```

## ×¡×™×›×•×

âœ… **×”×©×¨×ª ××•×’×‘×œ ×œ-512MB ×–×™×›×¨×•×Ÿ**
âœ… **× ×™×§×•×™ ×–×™×›×¨×•×Ÿ ××•×˜×•××˜×™ ××—×¨×™ ×›×œ ×‘×§×©×”**
âœ… **Endpoint ×œ× ×™×§×•×™ ×™×“× ×™**
âœ… **××¢×§×‘ ×–×™×›×¨×•×Ÿ**
âœ… **×¢×•×‘×“ ××¦×•×™×Ÿ ×¢× Free Plan ×©×œ Render**

**×”××¢×¨×›×ª ×¢×›×©×™×• ×™×¦×™×‘×” ×•××•×’× ×ª ××¤× ×™ ×§×¨×™×¡×•×ª ×–×™×›×¨×•×Ÿ!** ğŸ‰
